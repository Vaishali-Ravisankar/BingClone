var data =[ 
  { 
     "imageURL":"https://images-na.ssl-images-Amazon.com/images/I/8132SYU0r9L._UX679_.jpg",
     "company":"Amazon",
     "price":100,
     "category":"Trending",
     "user":"Men",
     "width":"w2",
     "height":""

  },
  { 
     "imageURL":"https://images-na.ssl-images-Amazon.com/images/I/61BgfDoO3NL._UY679_.jpg",
     "company":"Amazon",
     "price":200,
     "category":"Lifestyle",
     "user":"Men",
     "width":"w2",
     "height":""
  },
  { 
     "imageURL":"https://images-na.ssl-images-Amazon.com/images/I/81v1C8PiX3L._UL1500_.jpg",
     "company":"Amazon",
     "price":150,
     "category":"Trending",
     "user":"Women",
     "width":"w2",
     "height":""
  },
  { 
     "imageURL":"https://i9.fnp.com//images/pr/l/v20190220110554/shining-memory-personalized-lamp_1.jpg",
     "company":"Amazon",
     "price":250,
     "category":"Lifestyle",
     "user":"Women",
     "width":"w2",
     "height":"h2"
  },

  { 
   "imageURL":"https://images-na.ssl-images-Amazon.com/images/I/61YgNLYntML._UX679_.jpg",
   "company":"Amazon",
   "price":175,
   "category":"Trending",
   "user":"Men",
   "color":"blue",
   "width":"w2",
   "height":""
},
{ 
   "imageURL":"https://images-na.ssl-images-Amazon.com/images/I/81j-6A4olML._UX679_.jpg",
   "company":"Amazon",
   "price":276,
   "category":"Lifestyle",
   "user":"Men",
   "width":"w2",
   "height":""
},
{ 
   "imageURL":"https://images-na.ssl-images-Amazon.com/images/I/51yQTk5w6ZL.jpg",
   "company":"Amazon",
   "price":200,
   "category":"Home Decor",
   "user":"Women",
   "width":"w2",
   "height":"h2"
},

{ 
   "imageURL":"https://images-na.ssl-images-Amazon.com/images/I/71IfNMBRDNL._SX679_.jpg",
   "company":"Amazon",
   "price":2,
   "category":"Home Decor",
   "user":"Baby",
   "width":"w2",
   "height":""
},
{ 
   "imageURL":"https://images-na.ssl-images-Amazon.com/images/I/51SEfaOhueL.jpg",
   "company":"Amazon",
   "price":180,
   "category":"Home Decor",
   "user":"Men",
   "width":"w2",
   "height":""
},
{ 
 "imageURL":"https://images-na.ssl-images-Amazon.com/images/I/51ioAqJ8PYL._SY879_.jpg",
 "company":"Amazon",
 "price":90,
 "category":"Electronics",
 "user":"Men",
 "color":"green",
 "width":"w2",
 "height":""
},
{ 
 "imageURL":"https://images-na.ssl-images-Amazon.com/images/I/61x4JUtdg4L._SX679_.jpg",
 "company":"Amazon",
 "price":99,
 "category":"Electronics",
 "user":"Men",
 "width":"w2",
 "height":""
},

{ 
 "imageURL":"https://images-na.ssl-images-Amazon.com/images/I/619iqSa7LYL._UX679_.jpg",
 "company":"Amazon",
 "price":50,
 "category":"Electronics",
 "user":"Men",
 "width":"w2",
 "height":""
},
{ 
"imageURL":"https://images-na.ssl-images-Amazon.com/images/I/71ZIrJ6XLLL._AC_SX679_.jpg",
"company":"Amazon",
"price":"56",
"category":"Trending",
"user":"Women",
"width":"w2",
"height":""
},
{ 
"imageURL":"https://images-na.ssl-images-Amazon.com/images/I/61dcqFgiKSL._UX679_.jpg",
"company":"Amazon",
"price":201,
"category":"Electronics",
"user":"Men",
"width":"w2",
"height":""
},
{ 
"imageURL":"https://images-na.ssl-images-amazon.com/images/I/61WkfAZr8OL._AC_SY879_.jpg",
"company":"Amazon",
"price":25,
"category":"Lifestyle",
"user":"Kids",
"width":"w2",
"height":""
},
{ 
 "imageURL":"https://images-na.ssl-images-amazon.com/images/I/41Sm8leqclL._AC_.jpg",
 "company":"Amazon",
 "price":230,
 "category":"Appliances",
 "user":"Women",
 "width":"w2",
 "height":""
},

{ 
"imageURL":"https://images-na.ssl-images-amazon.com/images/I/31nsfrNrsbL._AC_.jpg",
"company":"Amazon",
"price":457,
"category":"Appliances",
"user":"Teen",
"width":"w2",
"height":""
},
{ 
"imageURL":"https://i9.fnp.com//images/pr/l/v20190220110554/shining-memory-personalized-lamp_1.jpg",
"company":"Amazon",
"price":543,
"category":"Home Decor",
"user":"Teen",
"width":"w2",
"height":""
},
{ 
"imageURL":"https://images-na.ssl-images-amazon.com/images/I/71Q3Ckuql6L._AC_SX679_.jpg",
"company":"Amazon",
"price":289,
"category":"Appliances",
"user":"Men",
"width":"w2",
"height":""
},
{ 
"imageURL":"https://images-na.ssl-images-amazon.com/images/I/71Qko14JA0L._AC_SX679_.jpg",
"company":"Amazon",
"price":278,
"category":"Electronics",
"user":"Teen",
"width":"w2",
"height":""
},
{ 
"imageURL":"https://images-na.ssl-images-amazon.com/images/I/71tsSH14qRL._AC_SX679_.jpg",
"company":"Amazon",
"price":672,
"category":"Trending",
"user":"Kids",
"width":"w2",
"height":""
},
{ 
"imageURL":"https://images-na.ssl-images-amazon.com/images/I/71mZMRyJ5hL._AC_SX679_.jpg",
"company":"Amazon",
"price":290,
"category":"Electronics",
"user":"Kids",
"width":"w2",
"height":""
}
]

  var data1=[
    {
      "imageURL":"https://i9.fnp.com//images/pr/l/v20190220110554/shining-memory-personalized-lamp_1.jpg",
  "company":"amazon",
  "price":"2",
  "category":"trending",
  "user":"Men",
  "color":"green",
  "width":"w2",
  "height":""
    },
    {
      "imageURL":"https://i9.fnp.com//images/pr/l/v20190220110554/shining-memory-personalized-lamp_1.jpg",
  "company":"amazon",
  "price":"2",
  "category":"trending",
  "user":"Men",
  "color":"green",
  "width":"w2",
  "height":""
    }
  ]
  var data2=[
    {
      "imageURL":"https://i9.fnp.com//images/pr/l/v20190220110554/shining-memory-personalized-lamp_1.jpg",
  "company":"amazon",
  "price":"2",
  "category":"trending",
  "user":"Men",
  "color":"green",
  "width":"w2",
  "height":""
    },
    {
      "imageURL":"https://i9.fnp.com//images/pr/l/v20190220110554/shining-memory-personalized-lamp_1.jpg",
  "company":"amazon",
  "price":"2",
  "category":"vintage",
  "user":"Women",
  "color":"green",
  "width":"w2",
  "height":""
    }
  ]
  


 var gridItems = data.map(function(o,index){
   
  return `
  <div class="item first ${o.width} ${o.height}" data-color=${o.color} data-category=${o.category} data-user=${o.user} data-price=${o.price}>
  <div class="item-content">
    <div class="custom-content">
    <div class="image-container">
      <img src=${o.imageURL} />
      </div>
      <br/>
      <div class="price-container">
      <span>${o.company}</span><br />
      <span>${"$"+o.price}</span>
      </div>
    </div>
  </div>
</div>
       `;
});

var gridItems2= data1.map(function(o){
  return `
  <div class="item second ${o.width} ${o.height}" data-color=${o.color} data-category=${o.category} data-user=${o.user} data-price=${o.price}>
  <div class="item-content">
    <div class="custom-content">
    <div class="image-container">
      <img src=${o.imageURL} />
      </div>
      <br/>
      <div class="price-container">
      <span>${o.company}</span><br />
      <span>${"$"+o.price}</span>
      </div>
    </div>
  </div>
</div>
       `;
})
var gridItems3= data2.map(function(o){
  return `
  <div class="item third ${o.width} ${o.height}" data-color=${o.color} data-category=${o.category} data-user=${o.user} data-price=${o.price}>
  <div class="item-content">
    <div class="custom-content">
    <div class="image-container">
      <img src=${o.imageURL} />
      </div>
      <br/>
      <div class="price-container">
      <span>${o.company}</span><br />
      <span>${"$"+o.price}</span>
      </div>
    </div>
  </div>
</div>
       `;
})

if(window.location.hash) {
  var hash = window.location.hash.substring(1); //Puts hash in variable, and removes the # character
    if(hash == 2){
        $('.grid').empty();
        $('.grid').append(gridItems2);
    }
    else if(hash == 3){
        $('.grid').empty();
        $('.grid').append(gridItems3);
    } 
    else{
      $('.grid').empty();
      $('.grid').append(gridItems);
      }
    }
  else {
  $('.grid').append(gridItems)
  }



document.addEventListener('DOMContentLoaded', function () {
  
    var grid = null,
        wrapper = document.querySelector('.grid-wrapper'),
        filterField = wrapper.querySelector('.filter-field'),
        gridElem = wrapper.querySelector('.grid'),
        filterAttr='data-category',
        userfilterAttr='data-user',
        menfilterAttr='data-user',
        womenfilterAttr='data-user',
        babyfilterAttr='data-user',
        priceAttr='data-price',
        filterFieldValue,
        dragOrder = [];
        document.getElementById("Men").addEventListener("click", function(){
         menFilter();
        });
        document.getElementById("Women").addEventListener("click", function(){
          womenFilter();
         });
         document.getElementById("Baby").addEventListener("click", function(){
          babyFilter();
         });

         
         document.getElementById("All").addEventListener("click", function(){
          AllFilter();
         });
  
         document.getElementById("next").addEventListener("click", function(){
          carouselmove();
         });
         document.getElementById("prev").addEventListener("click", function(){
          carouselback();
         });
         document.getElementById("low").addEventListener("click", function(){
          lowFilter();
         });
         document.getElementById("medium").addEventListener("click", function(){
          mediumFilter();
         });
         document.getElementById("high").addEventListener("click", function(){
          highFilter();
         });
         

    // Init the grid layout
    grid = new Muuri(gridElem, {
      dragEnabled: true,
      layout:{
        fillGaps:false
      }
      
    });

    filterFieldValue = filterField.value;

  
    // Filter field event binding
    filterField.addEventListener('change', filter);
   // userfilterField.addEventListener('change', userfilter);
    
   
    // Filtering
    function filter() {
      filterFieldValue = filterField.value;
      grid.filter(function (item) {
        var element = item.getElement(),
            isFilterMatch = !filterFieldValue ? true : (element.getAttribute(filterAttr) || '') === filterFieldValue;
        console.log('isFilterMatch',isFilterMatch);
            return  isFilterMatch;
      });
    }

    function menFilter() {
      menfilterFieldValue = "Men"
      grid.filter(function (item) {
        var element = item.getElement(),
            ismenFilterMatch = !menfilterFieldValue ? true : (element.getAttribute(menfilterAttr) || '') === menfilterFieldValue;
            return  ismenFilterMatch;
      }); 
    }
    function womenFilter() {
      womenfilterFieldValue = "Women"
      grid.filter(function (item) {
        var element = item.getElement(),
            iswomenFilterMatch = !womenfilterFieldValue ? true : (element.getAttribute(womenfilterAttr) || '') === womenfilterFieldValue;
            return  iswomenFilterMatch;
      }); 
    }
    function babyFilter() {
      babyfilterFieldValue = "Baby"
      grid.filter(function (item) {
        var element = item.getElement(),
            isbabyFilterMatch = !babyfilterFieldValue ? true : (element.getAttribute(babyfilterAttr) || '') === babyfilterFieldValue;
            return  isbabyFilterMatch;
      }); 
    }
    function AllFilter() {
      allfilterFieldValue = ""
      grid.filter(function (item) {
        var element = item.getElement(),
            allFilterMatch = !allfilterFieldValue ? true : (element.getAttribute(allfilterAttr) || '') === allfilterFieldValue;
            console.log('allFilterMatch',allFilterMatch)
            return  allFilterMatch;
      }); 
    }

    function lowFilter() {
      grid.filter(function (item) {
        var element = item.getElement(),
            test = element.getAttribute(priceAttr) <= 50
            console.log(element.getAttribute(priceAttr))
            return  test;
      }); 
    }
    function lowFilter() {
      grid.filter(function (item) {
        var element = item.getElement(),
            lowFilterMatch = element.getAttribute(priceAttr) <= 50
            return  lowFilterMatch;
      }); 
    }
    function mediumFilter() {
      grid.filter(function (item) {
        var element = item.getElement(),
            mediumFilterMatch = element.getAttribute(priceAttr) > 50 && element.getAttribute(priceAttr) <= 200
            return  mediumFilterMatch;
      }); 
    }
    function highFilter() {
      grid.filter(function (item) {
        var element = item.getElement(),
            highFilterMatch = element.getAttribute(priceAttr) > 200
            return  highFilterMatch;
      }); 
    }
    
function carouselmove(){
 if(window.location.hash){
    let hash = window.location.hash.substring(1);
    window.location.hash= parseInt(hash) + 1;
    location.reload()
  }
  else{
    window.location.hash=2;
    location.reload()
  }  
 
}

function carouselback(){
  if(window.location.hash){
    let hash = window.location.hash.substring(1);
    window.location.hash= parseInt(hash) - 1;
    location.reload()
  }
  else{
   
  }  

}




   
  }); 